<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JMBN Mission Editor</title>

<link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap" rel="stylesheet">
<link rel="icon" type="image/png"
      href="https://static.wixstatic.com/media/08ea88_820ac3bc561d4233ad73a7af859f28bf~mv2.png"
      sizes="32x32">

<style>
:root{
  --bg:#000;
  --panel:#0b0b0b;
  --row:#0a0a0a;
  --border:#d6b44c;
  --accent:#f2d675;
  --accent-soft:#c9b06a;
  --text:#f7f1d0;
  --muted:#c9b06a;
  --bad:#ff6b6b;
  --good:#37d996;
}

/* Reset */
*{box-sizing:border-box;margin:0;padding:0}
body{
  background:
    radial-gradient(circle at top,rgba(242,214,117,.08),transparent 55%),
    radial-gradient(circle at bottom,rgba(10,10,10,1),#000);
  color:var(--text);
  font-family:'Play',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  margin:0;
  padding:16px;
}

/* Brand + Nav (shared header styles) */
.brand{
  display:flex;align-items:center;gap:10px;
  margin:0 0 12px;
  border-bottom:1px solid var(--border);
  padding-bottom:8px;
}
.brand-logo{
  width:44px;height:44px;object-fit:contain;
  filter:drop-shadow(0 0 4px rgba(242,214,117,.25));
}
.brand h1{
  margin:0;color:var(--accent);font-size:22px;
}
.brand-sub{
  font-size:11px;color:var(--muted);margin-left:auto;text-align:right;
}
.nav{
  display:flex;align-items:center;gap:8px;
  flex-wrap:wrap;margin:8px 0 16px;
}
.nav-btn{
  --ring:#d6b44c;
  display:inline-flex;align-items:center;justify-content:center;
  padding:7px 14px;
  border:1px solid var(--ring);
  border-radius:999px;
  font-size:11px;
  text-decoration:none;
  color:var(--text);
  background:radial-gradient(circle at top left,rgba(242,214,117,.16),rgba(0,0,0,1));
  box-shadow:0 0 0 1px rgba(0,0,0,.7);
  position:relative;
  overflow:hidden;
}
.nav-btn::after{
  content:"";
  position:absolute;inset:-40%;
  background:conic-gradient(from 0deg,rgba(242,214,117,.0),rgba(242,214,117,.7),rgba(242,214,117,.0));
  opacity:0;transition:opacity .25s;
}
.nav-btn:hover::after{opacity:.35;}
.nav-btn span{position:relative;z-index:1}
.nav-btn.active{
  background:radial-gradient(circle at top left,rgba(242,214,117,.75),rgba(0,0,0,1));
  color:#000;
}

/* Layout */
.grid{
  max-width:1200px;
  margin:0 auto;
  display:grid;
  grid-template-columns:minmax(260px,340px) minmax(0,1fr);
  gap:18px;
}
@media(max-width:900px){
  .grid{grid-template-columns:1fr;}
}

/* Panels (Option A style) */
.panel{
  position:relative;
  border-radius:16px;
  border:1px solid var(--border);
  box-shadow:
    inset 0 0 0 1px rgba(242,214,117,.18),
    0 0 0 1px rgba(214,180,76,.35),
    0 18px 45px rgba(0,0,0,.9);
  background:
    radial-gradient(circle at top left,rgba(242,214,117,.08),rgba(0,0,0,1) 55%),
    radial-gradient(circle at bottom right,rgba(242,214,117,.05),rgba(0,0,0,1) 65%);
  padding:16px;
  overflow:hidden;
}
.panel::before{
  content:"";
  position:absolute;inset:-30%;
  background:
    radial-gradient(circle at 30% 0%,rgba(242,214,117,.09),transparent 60%);
  opacity:.45;
  pointer-events:none;
}
.panel > *{position:relative;z-index:1}
.panel-inner{display:flex;flex-direction:column;gap:12px}

/* Left: mission list */
.console-header{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom:6px;
}
.console-title{
  font-size:13px;text-transform:uppercase;letter-spacing:.16em;
  color:var(--accent);
}
.console-pill{
  font-size:10px;color:var(--muted);
  border-radius:999px;
  border:1px solid rgba(214,180,76,.5);
  padding:3px 10px;
}
.list-tools{
  display:flex;align-items:center;gap:8px;
  margin-bottom:8px;
  flex-wrap:wrap;
}
input[type="search"]{
  flex:1 1 160px;
  border-radius:11px;
  border:1px solid rgba(214,180,76,.35);
  padding:7px 10px;
  font-size:11px;
  background:#050505;
  color:var(--text);
  outline:none;
}
input::placeholder{color:rgba(200,190,150,.7);font-size:10px}
.small-btn{
  padding:6px 8px;
  border:1px solid rgba(214,180,76,.6);
  border-radius:999px;
  background:radial-gradient(circle at top left,rgba(242,214,117,.35),rgba(0,0,0,1));
  color:var(--text);
  font-size:10px;
  cursor:pointer;
}
.small-btn:hover{
  background:radial-gradient(circle at top left,rgba(242,214,117,.55),rgba(0,0,0,1));
}
.list{
  display:flex;flex-direction:column;gap:8px;
  max-height:68vh;
  overflow:auto;
  padding-right:4px;
}
.item{
  border-radius:11px;
  border:1px solid rgba(214,180,76,.45);
  background:radial-gradient(circle at top left,rgba(242,214,117,.05),rgba(0,0,0,.98));
  padding:8px 10px;
  display:flex;align-items:center;justify-content:space-between;
  gap:8px;
  cursor:pointer;
  transition:transform .12s,box-shadow .12s,border-color .12s,background .12s;
}
.item:hover{
  transform:translateY(-1px);
  border-color:var(--accent);
  box-shadow:0 0 16px rgba(242,214,117,.45);
  background:radial-gradient(circle at top left,rgba(242,214,117,.12),rgba(0,0,0,.98));
}
.item-main{min-width:0;}
.item-title{
  font-size:13px;font-weight:700;
  white-space:nowrap;text-overflow:ellipsis;overflow:hidden;
}
.item-meta{
  font-size:10px;color:var(--muted);
  display:flex;flex-wrap:wrap;gap:6px;margin-top:2px;
}
.badge{
  border-radius:999px;
  border:1px solid rgba(214,180,76,.4);
  padding:2px 7px;
  font-size:10px;
  background:rgba(0,0,0,.9);
}
.badge-id{font-variant-numeric:tabular-nums}

.subtle{font-size:10px;color:var(--muted)}
.mono{font-variant-numeric:tabular-nums}

/* Right: editor form */
.main-header{
  display:flex;align-items:center;gap:10px;justify-content:space-between;
}
.main-title{
  font-size:12px;text-transform:uppercase;letter-spacing:.16em;
  color:var(--muted);
}
.mode-pill{
  font-size:10px;color:var(--accent);
  border-radius:999px;
  border:1px solid rgba(214,180,76,.6);
  padding:3px 10px;
  background:#050505;
}
.form-grid{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px;
  margin-top:10px;
}
.form-grid.full{grid-template-columns:1fr;}
@media(max-width:720px){
  .form-grid{grid-template-columns:1fr;}
}
label{
  display:block;
  margin-bottom:3px;
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:.16em;
  color:var(--muted);
}
input[type="text"],
input[type="number"],
input[type="datetime-local"],
select,
textarea{
  width:100%;
  border-radius:11px;
  border:1px solid rgba(214,180,76,.35);
  padding:8px 10px;
  font-size:11px;
  background:#050505;
  color:var(--text);
  outline:none;
}
textarea{
  min-height:90px;
  resize:vertical;
}
input:focus,select:focus,textarea:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 1px rgba(242,214,117,.3);
}

/* Attachments */
.attach-list{margin-top:4px;}
.attach-item{
  display:grid;
  grid-template-columns:minmax(0,1.5fr) minmax(0,2fr) auto;
  gap:6px;
  margin-bottom:6px;
}
.attach-item button{padding:6px 9px}

/* Actions */
.actions{
  margin-top:12px;
  display:flex;flex-wrap:wrap;gap:8px;
}
.btn{
  font-size:11px;
  border-radius:999px;
  border:1px solid rgba(214,180,76,.6);
  background:radial-gradient(circle at top left,rgba(242,214,117,.35),rgba(0,0,0,1));
  color:var(--text);
  padding:7px 13px;
  cursor:pointer;
}
.btn.primary{
  background:radial-gradient(circle at top left,rgba(242,214,117,.9),rgba(0,0,0,1));
  color:#000;
  box-shadow:0 0 16px rgba(242,214,117,.5);
}
.btn.danger{
  border-color:var(--bad);
  color:var(--bad);
}
.btn:hover{
  background:radial-gradient(circle at top left,rgba(242,214,117,.6),rgba(0,0,0,1));
  color:#000;
}
.btn.danger:hover{
  background:rgba(255,107,107,.12);
  color:#ff6b6b;
}
.nowrap{white-space:nowrap}
</style>
</head>
<body>

<!-- Shared header -->
<div id="header"></div>

<div class="grid">
  <!-- LEFT: Mission list -->
  <aside class="panel">
    <div class="panel-inner">
      <div class="console-header">
        <div>
          <div class="console-title">Mission Index</div>
          <div class="subtle">Select a mission to edit Â· or create new</div>
        </div>
        <div class="console-pill" id="listCount">0 missions</div>
      </div>

      <div class="list-tools">
        <input id="search" type="search" placeholder="Search title / tags / type / statusâ€¦" />
        <button id="reloadBtn" class="small-btn" type="button">â†»</button>
        <button id="newBtn" class="small-btn" type="button">ï¼‹ New</button>
      </div>

      <div id="missionList" class="list"></div>
    </div>
  </aside>

  <!-- RIGHT: Editor -->
  <section class="panel">
    <div class="panel-inner">
      <div class="main-header">
        <div>
          <div class="main-title">Mission Editor</div>
          <div class="subtle">Form-up only Â· mission core data Â· attachments &amp; notes</div>
        </div>
        <div id="modeLabel" class="mode-pill">Create</div>
      </div>

      <!-- Title -->
      <div class="form-grid full">
        <div>
          <label for="title">Mission Title *</label>
          <input id="title" type="text" placeholder="e.g., RW S2 â€” 24-box Haul">
        </div>
      </div>

      <!-- Type + Status -->
      <div class="form-grid">
        <div>
          <label for="type">Type</label>
          <select id="type">
            <option value="">(select type)</option>
            <option value="hauling">Hauling</option>
            <option value="cargo">Cargo</option>
            <option value="salvage">Salvage</option>
            <option value="mining">Mining</option>
            <option value="delivery">Delivery</option>
            <option value="combat">Combat</option>
            <option value="support">Support</option>
            <option value="training">Training</option>
            <option value="exploration">Exploration</option>
          </select>
        </div>
        <div>
          <label for="status">Status</label>
          <select id="status">
            <option value="">(select status)</option>
            <option value="planned">Planned</option>
            <option value="active">Active</option>
            <option value="success">Success</option>
            <option value="fail">Fail</option>
            <option value="abort">Abort</option>
          </select>
        </div>
      </div>

      <!-- Origin + Start time -->
      <div class="form-grid">
        <div>
          <label for="origin">Form-up (Origin)</label>
          <input id="origin" type="text" placeholder="e.g., Area18 Â· Everus Harbor pad 07">
        </div>
        <div>
          <label for="startTime">Start Date / Time</label>
          <input id="startTime" type="datetime-local">
        </div>
      </div>

      <!-- Hours + Payout -->
      <div class="form-grid">
        <div>
          <label for="hours">No. of Hours</label>
          <input id="hours" type="number" step="0.1" min="0">
        </div>
        <div>
          <label for="payout">Payout (aUEC)</label>
          <input id="payout" type="number" step="1" min="0">
        </div>
      </div>

      <!-- Tags + Submitted by (display only) -->
      <div class="form-grid">
        <div>
          <label for="tags">Tags (comma separated)</label>
          <input id="tags" type="text" placeholder="e.g., org, cargo, night-run">
        </div>
        <div>
          <label>Submitted By</label>
          <input id="submittedByDisplay" type="text" readonly placeholder="â€”" title="Automatically set by your profile">
          <input id="submittedBy" type="hidden">
        </div>
      </div>

      <!-- Attachments -->
      <div class="form-grid full">
        <div>
          <label>Attachments (optional)</label>
          <div id="attachList" class="attach-list"></div>
          <button id="addAttachBtn" class="small-btn" type="button" style="margin-top:4px">ï¼‹ Add Attachment</button>
          <div class="subtle" style="margin-top:4px">
            Each attachment = label + URL (screenshots, sheets, etc.). Saved into the missionâ€™s <code>attachments</code> JSON.
          </div>
        </div>
      </div>

      <!-- Notes -->
      <div class="form-grid full">
        <div>
          <label for="notes">Notes / AAR</label>
          <textarea id="notes" placeholder="Summary, key events, lessons learnedâ€¦"></textarea>
        </div>
      </div>

      <!-- Actions -->
      <div class="actions">
        <button id="clearBtn" class="btn" type="button">Clear Form</button>
        <button id="saveNewBtn" class="btn primary" type="button">ðŸ’¾ Save as New</button>
        <button id="updateBtn" class="btn" type="button">âœŽ Update Selected</button>
        <button id="deleteBtn" class="btn danger" type="button">ðŸ—‘ Delete Selected</button>
      </div>

      <div class="subtle" style="margin-top:4px">
        Note: Attendance is managed separately via the Operations / Mission Log attendance modal.
      </div>
    </div>
  </section>
</div>

<!-- Supabase + auth -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="js/auth.js"></script>

<script>
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
const esc = s => {
  const d=document.createElement('div');
  d.textContent = s ?? '';
  return d.innerHTML;
};

/* State */
let sb = null;
let session = null;
let missions = [];
let currentId = null;
let me = { id:null, name:'' };

/* Date helpers */
function isoToLocalInput(iso){
  if(!iso) return '';
  const d=new Date(iso);
  const pad=n=>String(n).padStart(2,'0');
  return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}`;
}
function localInputToISO(v){
  if(!v) return null;
  const d = new Date(v);
  if(isNaN(d.getTime())) return null;
  return d.toISOString();
}
function fmtShort(iso){
  if(!iso) return '';
  return new Date(iso).toLocaleString('en-SG',{
    day:'numeric',month:'short',hour:'numeric',minute:'2-digit',hour12:true
  }).replace(/\s?([ap])m/i,'$1m');
}

/* Attachments UI */
function addAttachRow(name='', url=''){
  const wrap = document.createElement('div');
  wrap.className='attach-item';
  wrap.innerHTML = `
    <input type="text" placeholder="Label (e.g., Screenshot)" value="${esc(name)}">
    <input type="text" placeholder="URL (https://â€¦)" value="${esc(url)}">
    <button type="button" class="small-btn">âœ•</button>
  `;
  const btn = wrap.querySelector('button');
  btn.addEventListener('click',()=>wrap.remove());
  $('#attachList').appendChild(wrap);
}
function collectAttachments(){
  const out = [];
  $$('#attachList .attach-item').forEach(row=>{
    const [nameInput,urlInput] = row.querySelectorAll('input');
    const label = (nameInput.value||'').trim();
    const url   = (urlInput.value||'').trim();
    if(!url) return;
    try{ new URL(url); }catch{ return; }
    out.push({ name: label || (url.split('/').pop() || 'link'), url });
  });
  return out;
}

/* Form helpers */
function setModeLabel(){
  const el = $('#modeLabel');
  if(!el) return;
  el.textContent = currentId
    ? `Editing ${currentId.slice(0,8)}â€¦`
    : 'Create';
}
function clearForm(){
  currentId = null;
  $('#title').value = '';
  $('#type').value = '';
  $('#status').value = '';
  $('#origin').value = '';
  $('#startTime').value = '';
  $('#hours').value = '';
  $('#payout').value = '';
  $('#tags').value = '';
  $('#notes').value = '';
  $('#attachList').innerHTML = '';
  addAttachRow();
  // keep submittedBy locked to current user
  $('#submittedBy').value = me.id || '';
  $('#submittedByDisplay').value = me.name || '';
  setModeLabel();
}
function fillForm(m){
  currentId = m.id;
  $('#title').value = m.title || '';
  $('#type').value = (m.type || '').toLowerCase();
  $('#status').value = (m.status || '').toLowerCase();
  $('#origin').value = m.origin || '';
  $('#startTime').value = isoToLocalInput(m.start_time);
  $('#hours').value = m.hours ?? '';
  $('#payout').value = m.payout_auec ?? '';
  $('#tags').value = m.tags || '';
  $('#notes').value = m.notes || '';

  $('#submittedBy').value = m.submitted_by || '';
  // Prefer view's submitted_by_name; fall back to own name if self
  const submitName =
    m.submitted_by_name ||
    (m.submitted_by === me.id ? me.name : (m.submitted_by || ''));
  $('#submittedByDisplay').value = submitName;

  $('#attachList').innerHTML = '';
  if(Array.isArray(m.attachments) && m.attachments.length){
    m.attachments.forEach(a=>addAttachRow(a.name||'',a.url||''));
  }else{
    addAttachRow();
  }
  setModeLabel();
}
function payloadFromForm(){
  return {
    title: ($('#title').value||'').trim(),
    type: ($('#type').value||'').toLowerCase() || null,
    status: ($('#status').value||'').toLowerCase() || null,
    origin: ($('#origin').value||'').trim() || null,
    start_time: localInputToISO($('#startTime').value),
    hours: $('#hours').value !== '' ? Number($('#hours').value) : null,
    payout_auec: $('#payout').value !== '' ? Number($('#payout').value) : null,
    tags: ($('#tags').value||'').trim() || null,
    notes: ($('#notes').value||'').trim() || null,
    attachments: collectAttachments()
  };
}

/* List rendering */
function renderList(rows){
  const list = $('#missionList');
  const countEl = $('#listCount');
  list.innerHTML = '';
  const total = rows.length;
  if(countEl){
    countEl.textContent = total ? `${total} mission${total>1?'s':''}` : '0 missions';
  }
  if(!rows.length){
    list.innerHTML = `
      <div class="item">
        <div class="item-main">
          <div class="item-title">No missions found</div>
          <div class="item-meta">Adjust search or create a new mission.</div>
        </div>
      </div>`;
    return;
  }
  rows.forEach(m=>{
    const el = document.createElement('article');
    el.className = 'item';
    el.innerHTML = `
      <div class="item-main">
        <div class="item-title">${esc(m.title || '(untitled mission)')}</div>
        <div class="item-meta">
          ${m.type ? `<span class="badge">${esc(m.type)}</span>` : ''}
          ${m.status ? `<span class="badge">${esc(m.status)}</span>` : ''}
          <span>${fmtShort(m.start_time) || 'no start'}</span>
          ${m.origin ? `<span>Â· ${esc(m.origin)}</span>` : ''}
          <span>Â· by ${esc(m.submitted_by_name || 'â€”')}</span>
        </div>
      </div>
      <div class="nowrap">
        <span class="badge badge-id">${esc(m.id.slice(0,8))}</span>
      </div>
    `;
    el.addEventListener('click',()=>openMission(m.id));
    list.appendChild(el);
  });
}
function applySearch(){
  const q = ($('#search').value||'').toLowerCase();
  if(!q){ renderList(missions); return; }
  const filtered = missions.filter(m=>{
    const blob = `${m.title||''} ${m.type||''} ${m.status||''} ${m.tags||''} ${m.origin||''} ${m.submitted_by_name||''}`.toLowerCase();
    return blob.includes(q);
  });
  renderList(filtered);
}

/* Supabase calls */
async function loadMissions(){
  const { data, error } = await sb
    .from('v_missions_detailed')
    .select('id,title,type,status,origin,start_time,hours,payout_auec,tags,attachments,notes,submitted_by,submitted_by_name,created_at')
    .order('created_at',{ascending:false});
  if(error){
    alert('Failed to load missions: '+error.message);
    missions = [];
    renderList([]);
    return;
  }
  missions = data || [];
  renderList(missions);
}

async function openMission(id){
  const { data, error } = await sb
    .from('v_missions_detailed')
    .select('id,title,type,status,origin,start_time,hours,payout_auec,tags,attachments,notes,submitted_by,submitted_by_name,created_at')
    .eq('id',id)
    .single();
  if(error){
    alert('Failed to open mission: '+error.message);
    return;
  }
  fillForm(data);
  // keep ?id in URL for deep-linking
  const u = new URL(location.href);
  u.searchParams.set('id', id);
  history.replaceState(null,'',u.toString());
}

async function saveNew(){
  const payload = payloadFromForm();
  if(!payload.title){
    alert('Mission title is required.');
    return;
  }
  payload.submitted_by = me.id; // set owner
  const { data, error } = await sb
    .from('missions')
    .insert(payload)
    .select()
    .single();
  if(error){
    alert('Save failed: '+error.message);
    return;
  }
  await loadMissions();
  fillForm(data);
  alert('Mission saved.');
}

async function updateCurrent(){
  if(!currentId){
    alert('No mission selected. Use "Save as New" or select one from the list.');
    return;
  }
  const payload = payloadFromForm();
  // do not change submitted_by on update
  const { error } = await sb
    .from('missions')
    .update(payload)
    .eq('id',currentId);
  if(error){
    alert('Update failed: '+error.message);
    return;
  }
  await loadMissions();
  const updated = missions.find(m=>m.id===currentId);
  if(updated) fillForm(updated);
  alert('Mission updated.');
}

async function deleteCurrent(){
  if(!currentId){
    alert('No mission selected.');
    return;
  }
  if(!confirm('Delete this mission? This cannot be undone.')) return;
  const { error } = await sb
    .from('missions')
    .delete()
    .eq('id',currentId);
  if(error){
    alert('Delete failed: '+error.message);
    return;
  }
  currentId = null;
  clearForm();
  await loadMissions();
  alert('Mission deleted.');
  const u = new URL(location.href);
  u.searchParams.delete('id');
  history.replaceState(null,'',u.toString());
}

/* Auth + profile */
async function initAuth(){
  // use shared auth helper
  session = await requireAuth();
  if(!session) return;
  sb = getSupabase();

  me.id = session.user.id;
  let name = session.user.email?.split('@')[0] || 'User';
  try{
    const { data: prof, error } = await sb
      .from('profiles')
      .select('display_name')
      .eq('user_id', session.user.id)
      .maybeSingle();
    if(!error && prof && prof.display_name){
      name = prof.display_name;
    }
  }catch(e){}
  me.name = name;

  $('#submittedBy').value = me.id;
  $('#submittedByDisplay').value = me.name;
}

/* Init */
document.addEventListener('DOMContentLoaded', async ()=>{
  // 1) Inject shared header
  try{
    const host = document.getElementById('header');
    if(host){
      const res = await fetch('header.html');
      host.innerHTML = await res.text();

      // highlight current page in nav
      const here = location.pathname.split('/').pop() || 'mission-editor.html';
      host.querySelectorAll('.nav-btn').forEach(a=>{
        if(a.getAttribute('href')===here){
          a.classList.add('active');
        }
      });
    }
  }catch(e){
    console.error('Failed to load header.html', e);
  }

  // 2) Auth + Supabase
  await initAuth();
  if(!sb) return;

  // 3) Wire events
  $('#search').addEventListener('input',applySearch);
  $('#reloadBtn').addEventListener('click',loadMissions);
  $('#newBtn').addEventListener('click',clearForm);
  $('#clearBtn').addEventListener('click',()=>{ if(confirm('Clear the form?')) clearForm(); });
  $('#addAttachBtn').addEventListener('click',()=>addAttachRow());
  $('#saveNewBtn').addEventListener('click',saveNew);
  $('#updateBtn').addEventListener('click',updateCurrent);
  $('#deleteBtn').addEventListener('click',deleteCurrent);

  // 4) Start with one empty attachment row + load data
  addAttachRow();
  setModeLabel();
  await loadMissions();

  // deep link ?id=...
  const qs = new URLSearchParams(location.search);
  if(qs.get('id')) openMission(qs.get('id'));
});
</script>
</body>
</html>