<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JMBN Contracts Manifest</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap" rel="stylesheet">
<link rel="icon" type="image/png"
      href="https://static.wixstatic.com/media/08ea88_820ac3bc561d4233ad73a7af859f28bf~mv2.png"
      sizes="32x32">
<style>
:root{
  --bg:#000;--panel:#0b0b0b;--border:#d6b44c;--card:#141414;
  --accent:#f2d675;--text:#f7f1d0;--muted:#c9b06a;--bad:#ff6b6b;
  --fs-base:14px;--fs-small:11px;--fs-table:13px;--fs-h1:clamp(18px,2.2vw,22px);
}
*{box-sizing:border-box}
body{
  background:
    radial-gradient(1200px 900px at 15% -10%, rgba(242,214,117,.08), transparent 60%),
    radial-gradient(900px 700px at 120% 110%, rgba(214,180,76,.05), transparent 60%),
    #000;
  color:var(--text);
  font-family:'Play',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  margin:0;padding:14px;letter-spacing:.25px;font-size:var(--fs-base);
}

/* Header */
.brand{display:flex;align-items:center;gap:10px;margin:0 0 8px;border-bottom:1px solid var(--border);padding-bottom:6px}
.brand-logo{width:44px;height:44px;object-fit:contain;filter:drop-shadow(0 0 4px rgba(242,214,117,.25))}
.brand h1{font-weight:700;font-size:var(--fs-h1);color:var(--accent);margin:0}

/* Shiny nav */
.nav{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin:6px 0 10px}
.nav-btn{
  --gold:#f2d675;--gold2:#e7c760;--ring:#d6b44c;
  position:relative;display:inline-flex;align-items:center;justify-content:center;
  padding:7px 14px;border:1px solid var(--ring);border-radius:999px;
  background:linear-gradient(180deg,#0c0c0c,#060606);
  color:var(--accent);text-decoration:none;font-weight:700;
  box-shadow:inset 0 0 0 1px rgba(214,180,76,.12);
  transition:transform .15s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
}
.nav-btn:hover{transform:translateY(-1px);box-shadow:0 0 12px rgba(214,180,76,.25), inset 0 0 0 1px rgba(214,180,76,.18);background:linear-gradient(180deg,#1a1a1a,#0a0a0a)}
.nav-btn.active{
  color:#000;background:linear-gradient(180deg,var(--gold),var(--gold2));
  border-color:var(--ring);box-shadow:0 0 20px rgba(214,180,76,.45);
}
.nav-btn.active::after{
  content:"";position:absolute;inset:0;background:linear-gradient(120deg,rgba(255,255,255,0) 30%,rgba(255,255,255,.3) 50%,rgba(255,255,255,0) 70%);
  border-radius:inherit;transform:translateX(-120%);animation:shine 2.8s ease-in-out infinite;pointer-events:none;
}
@keyframes shine{0%{transform:translateX(-120%)}35%{transform:translateX(120%)}100%{transform:translateX(120%)}}

/* Panels + buttons */
.panel{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:12px;margin-top:8px;box-shadow:0 0 18px rgba(214,180,76,.22)}
.controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
button{padding:7px 11px;border-radius:10px;background:linear-gradient(180deg,#0c0c0c,#060606);color:var(--accent);border:1px solid var(--border);cursor:pointer;font-family:'Play';transition:.2s}
button:hover{background:var(--accent);color:#000}
.btn-primary{background:var(--accent);color:#000}
input,select,textarea{background:#0a0a0a;border:1px solid var(--border);border-radius:8px;padding:9px;color:var(--text);font-size:var(--fs-table);font-family:'Play'}
textarea{resize:vertical}

/* Table */
.tableWrap{border:1px solid var(--border);border-radius:12px;overflow:auto;max-height:70vh;margin-top:10px}
table{width:100%;border-collapse:collapse;font-size:var(--fs-table)}
th,td{border-bottom:1px solid rgba(214,180,76,.3);padding:8px;text-align:left}
th{color:var(--accent);background:#080808;font-weight:500;font-size:12px}
tr:nth-child(even){background:#111}
tr:hover{background:rgba(214,180,76,.08)}
.small{font-size:var(--fs-small);color:var(--muted)}

/* Modal */
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center;z-index:10}
.modal{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:20px;width:95%;max-width:500px;box-shadow:0 0 25px rgba(214,180,76,.3)}
.modal h2{color:var(--accent);margin-top:0}
.modal .form-grid{display:grid;gap:8px}
.modal-buttons{display:flex;justify-content:flex-end;gap:8px;margin-top:10px}
</style>
</head>
<body>
  <div class="brand">
    <img class="brand-logo" src="https://static.wixstatic.com/media/08ea88_820ac3bc561d4233ad73a7af859f28bf~mv2.png/v1/fill/w_66,h_66,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/0_New_JMBN_Logo_Gold.png" alt="JMBN">
    <h1>JMBN Contracts</h1>
  </div>

  <nav class="nav">
    <a class="nav-btn" href="index.html">Manifest</a>
    <a class="nav-btn" href="hangar.html">Hangar</a>
    <a class="nav-btn" href="components.html">Components</a>
    <a class="nav-btn" href="contracts.html">Contracts</a>
    <a class="nav-btn" href="mission-log.html">Mission Log</a>
  </nav>

  <div class="panel">
    <div class="controls">
      <input id="search" placeholder="Search contractsâ€¦">
      <button id="addBtn" class="btn-primary">Add Contract</button>
      <button id="saveBtn">Save</button>
      <button id="resetBtn" style="border-color:var(--bad);color:var(--bad)">Clear All</button>
      <button id="exportJSON">Export JSON</button>
      <button id="importJSON" class="btn-primary">Import JSON</button>
    </div>

    <div class="tableWrap">
      <table>
        <thead><tr><th>Time</th><th>Contract</th><th>Origin</th><th>Destination</th><th>Reward (aUEC)</th><th>Status</th><th>Notes</th><th>Actions</th></tr></thead>
        <tbody id="rows"></tbody>
      </table>
    </div>
  </div>

  <!-- Modal for new contract -->
  <div class="modal-bg" id="modal-bg">
    <div class="modal">
      <h2>New Contract</h2>
      <div class="form-grid">
        <input id="cName" placeholder="Contract Name *">
        <input id="cOrigin" placeholder="Origin">
        <input id="cDest" placeholder="Destination">
        <input id="cReward" placeholder="Reward (aUEC)">
        <select id="cStatus">
          <option>Available</option><option>Accepted</option><option>Completed</option>
        </select>
        <textarea id="cNotes" placeholder="Notes" rows="3"></textarea>
      </div>
      <div class="modal-buttons">
        <button id="cancelModal">Cancel</button>
        <button id="saveModal" class="btn-primary">Add</button>
      </div>
    </div>
  </div>

<script>
(function(){
  const here=location.pathname.split('/').pop()||'contracts.html';
  document.querySelectorAll('.nav-btn').forEach(a=>{
    if(a.getAttribute('href')===here){a.classList.add('active');}
  });
})();

const STORE='jmbn-contracts';
const $=s=>document.querySelector(s);
const $$=s=>Array.from(document.querySelectorAll(s));
const uid=()=> 'CT-'+Math.random().toString(36).slice(2,8);
let contracts=[];

/* Load + Save */
function load(){
  const raw=localStorage.getItem(STORE);
  contracts=raw?JSON.parse(raw):[];
  render();
}
function save(){localStorage.setItem(STORE,JSON.stringify(contracts));}
$('#saveBtn').onclick=save;
$('#resetBtn').onclick=()=>{if(confirm('Clear all contracts?')){contracts=[];save();render();}};

/* Add contract modal */
const modalBG=$('#modal-bg');
$('#addBtn').onclick=()=>{modalBG.style.display='flex';};
$('#cancelModal').onclick=()=>{modalBG.style.display='none';clearForm();};
$('#saveModal').onclick=()=>{
  const name=$('#cName').value.trim(); if(!name){alert('Name required');return;}
  const now=new Date().toLocaleString();
  const obj={
    id:uid(),
    time:now,
    name,
    origin:$('#cOrigin').value.trim(),
    destination:$('#cDest').value.trim(),
    reward:$('#cReward').value.trim(),
    status:$('#cStatus').value,
    notes:$('#cNotes').value.trim()
  };
  contracts.push(obj);
  save();render();modalBG.style.display='none';clearForm();
};
function clearForm(){$('#cName').value=$('#cOrigin').value=$('#cDest').value=$('#cReward').value=$('#cNotes').value='';}

/* Render */
function render(){
  const q=($('#search').value||'').toLowerCase();
  let arr=contracts.slice();
  if(q)arr=arr.filter(x=>`${x.name} ${x.origin} ${x.destination} ${x.notes}`.toLowerCase().includes(q));
  $('#rows').innerHTML=arr.map(c=>`
    <tr>
      <td>${c.time||'-'}</td><td>${c.name}</td><td>${c.origin}</td><td>${c.destination}</td>
      <td>${c.reward}</td><td>${c.status}</td><td>${c.notes}</td>
      <td><button data-act="edit" data-id="${c.id}">Edit</button>
          <button data-act="del" data-id="${c.id}" style="border-color:var(--bad);color:var(--bad)">Del</button></td>
    </tr>`).join('');
  $$('#rows button[data-act]').forEach(b=>{
    const id=b.dataset.id;
    if(b.dataset.act==='edit')b.onclick=()=>edit(id);
    if(b.dataset.act==='del')b.onclick=()=>{if(confirm('Delete this contract?')){contracts=contracts.filter(x=>x.id!==id);save();render();}};
  });
}

/* Edit */
function edit(id){
  const c=contracts.find(x=>x.id===id);
  if(!c)return;
  const name=prompt('Contract name:',c.name)||c.name;
  const origin=prompt('Origin:',c.origin)||c.origin;
  const dest=prompt('Destination:',c.destination)||c.destination;
  const reward=prompt('Reward:',c.reward)||c.reward;
  const status=prompt('Status:',c.status)||c.status;
  const notes=prompt('Notes:',c.notes)||c.notes;
  Object.assign(c,{name,origin,destination:dest,reward,status,notes});
  save();render();
}

/* Export / Import */
$('#exportJSON').onclick=()=>{
  const blob=new Blob([JSON.stringify(contracts,null,2)],{type:'application/json'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a');a.href=url;a.download='jmbn-contracts.json';a.click();
  URL.revokeObjectURL(url);
};
$('#importJSON').onclick=()=>{
  const inp=document.createElement('input');inp.type='file';inp.accept='application/json';
  inp.onchange=()=>{
    const f=inp.files?.[0];if(!f)return;
    const r=new FileReader();
    r.onload=()=>{
      try{
        const arr=JSON.parse(r.result);
        if(!Array.isArray(arr))throw new Error('Invalid file');
        contracts=arr;
        save();render();alert('Import complete');
      }catch(e){alert('Import failed: '+e.message);}
    };
    r.readAsText(f);
  };
  inp.click();
};

/* Init */
document.addEventListener('DOMContentLoaded',load);
</script>
</body>
</html>
